var archs=[{% for i in site.data.table.arch %}'{{i.name}}',{% endfor %}];var apis=[{% for i in site.data.table.api %}'{{i.name}}',{% endfor %}];var variants=[{% for i in site.data.table.variant %}'{{i.name}}',{% endfor %}];var packages={};
Array.prototype.has=function has(o){return this.indexOf(o)!==-1;};Object.prototype.each=function each(key,cb){var test=function(el){if(!!el[key]){cb(el);}};if(typeof this.length==='number'){for(var i=0;i<this.length;i++){test(this[i]);}}else{for(var i in this){if(this.hasOwnProperty(i)){test(this[i]);}}}};
var storage=window.localStorage;try{storage.setItem('__test_key','__test_val');if(storage.getItem('__test_key')!=='__test_val'){throw 'getItem test failed';}storage.removeItem('__test_key');}catch(e){storage={getItem:function(){return null;},setItem:function(){},removeItem:function(){},};}
var arch=getUrlParam('arch');var autoAllowArch=archs.has(arch);if(!autoAllowArch){arch=storage.getItem('arch')||'arm';}document.getElementById(arch).checked=true;
var api=getUrlParam('api');var autoAllowApi=apis.has(api);if(!autoAllowApi){var ua=(!!navigator.userAgent?navigator.userAgent:'').match(/Android ((\d\.\d)(\.\d)?)/i)||[];api=storage.getItem('api')||(apis.has(ua[1])?ua[1]:(apis.has(ua[2])?ua[2]:'6.0'));}document.getElementById(api).checked=true;
var variant=getUrlParam('variant');var autoAllowVariant=variants.has(variant);if(!autoAllowVariant){variant=storage.getItem('variant')||'stock';}document.getElementById(variant).checked=true;
var download=getUrlParam('download')==='true';var autoDownload=download&&autoAllowArch&&autoAllowApi&&autoAllowVariant;if(download&&!autoDownload){alert('Automatic download requested but refused: Unexpected value for '+[autoAllowArch?null:'arch',autoAllowApi?null:'api',autoAllowVariant?null:'variant'].filter(function(o){return o!==null;}).join(' & ')+'.');}
function getCookie(key){key+='=';var cs=document.cookie.split(';');for(var i=0;i<cs.length;i++){var c=cs[i].trim();if(c.substr(0,key.length)===key){return c.substr(key.length).trim();}}return '';}
function setCookie(key,value,days){var d=new Date();d.setTime(d.getTime()+(days*24*60*60*1000));document.cookie=key+"="+value+"; expires="+d.toUTCString();}
var isApp=getUrlParam('app')==='true';
function redirectToFile(eventCategory,eventLabel,filename){gaEvent(eventCategory,'download',eventLabel,function(){location.assign('https://github.com/opengapps/'+arch+'/releases/download/'+packages[arch].dateTag+'/'+filename);},1000);}
function redirectToUrl(targetUrl){gaEventOutbound(targetUrl,function(){var d=true;if(isApp&&targetUrl!='{{site.url}}/'){d=!window.open(targetUrl,'_blank');}if(d){location.assign(targetUrl);}});}
function downloadSubmit(){var v=validateForm();if(v==='ok'){redirectToFile('GApps',arch+'-'+api+'-'+variant,'open_gapps-'+arch+'-'+api+'-'+variant+'-'+packages[arch].dateTag+'.zip');}}
function versionSubmit(){var v=validateForm();if(v==='ok'){redirectToFile('Version',arch+'-'+api+'-'+variant,'open_gapps-'+arch+'-'+api+'-'+variant+'-'+packages[arch].dateTag+'.versionlog.txt');}}
function md5Submit(){var v=validateForm();if(v==='ok'){redirectToFile('MD5',arch+'-'+api+'-'+variant,'open_gapps-'+arch+'-'+api+'-'+variant+'-'+packages[arch].dateTag+'.zip.md5');}}
function reportSubmit(){var v=validateForm();if(v==='variant'||v==='ok'){redirectToFile('Report',arch+'-'+api,'sources_report-'+arch+'-'+api+'-'+packages[arch].dateTag+'.txt');}}
function olderSubmit(){var v=validateForm();if(v==='api'||v==='variant'||v==='ok'){redirectToUrl('https://github.com/opengapps/'+arch+'/releases/');}}
function setButtonEnable(id,enable){var el=document.getElementById(id);if(typeof el.MaterialButton==='object'){el.MaterialButton[(!!enable)?'enable':'disable']();}}
function setBoxEnable(id,enable){var el=document.getElementById(id).parentElement;if(typeof el.MaterialRadio==='object'){el.MaterialRadio[(!!enable)?'enable':'disable']();}}
function setBoxCheck(id,check){var el=document.getElementById(id).parentElement;if(typeof el.MaterialRadio==='object'){el.MaterialRadio[!!check?'check':'uncheck']();}}
function setAd(el,content,label){el.style.cssText='display:block !important';el.innerHTML=content;gaEvent('Ads','display',label);}
var extraAds=[];extraAds.push({name:'SEFileExplorer',titleText:'Download Solid Explorer to copy Open GApps to your mobile device',altText:'Download Solid Explorer',imgName:'se',targetUrl:'https://play.google.com/store/apps/details?id=pl.solidexplorer2&referrer=utm_source%3Dopengapps%26utm_medium%3Dbanner'});
function showSnackbar(){if(getCookie('c')!=='y'){window.componentHandler.upgradeDom();var snackbar=document.getElementsByClassName('mdl-js-snackbar')[0].MaterialSnackbar;snackbar.showSnackbar({message:'We use cookies to share information about your use of our site with our advertising and analytics partner',actionHandler:function(){setCookie('c','y',365);snackbar.cleanup_();},actionText:'Got it!',timeout:60000});}}
function validateAds(){var ads=document.getElementsByClassName('adsbygoogle');var donateTextOnFirst=Math.random()<0.5;var donateTextElement=ads[donateTextOnFirst?0:1];var fallbackAdElement=ads[donateTextOnFirst?1:0];if(!donateTextElement||!fallbackAdElement){setTimeout(validateAds,500);return;}if(donateTextElement.innerHTML.trim().length===0){var donateTitles=['Please Donate!','Support Open GApps'];setAd(donateTextElement.parentElement,'<div id="donatebox"><div id="donatetitle" class="mdl-typography--display-1"><a href="#" onclick="window.paypal();return false;" title="The project is supported by donations and advertisements">'+donateTitles[Math.round(Math.random())]+'</a></div><br /><div id="donatebody" class="mdl-typography--body-1">You blocked the advertisements, that is OK. But please consider a <a href="#" onclick="window.paypal();return false;">donation</a> to the project instead!</div><div id="donatespace"><br /></div><a href="#" onclick="window.paypal();return false;"><div id="donaterectangle"><i class="material-icons" style="color:#f5f5f5">favorite</i></div></a><br /><div id="donatecaption" class="mdl-typography--caption-color-contrast">The advertisement revenue supports the projects\' efforts. Can\'t donate? <a href="abp:subscribe?location=http%3A%2F%2Fopengapps.org%2Fopengapps.org.abp.txt&amp;title=Open%20GApps" title="Add opengapps.org to your Adblocker\'s whitelist">Please unblock our ads!</a></div></div>','Donate');}else{gaEvent('Ads','display','AdSense'+(donateTextOnFirst?'Header':'Footer'));}if(fallbackAdElement.innerHTML.trim().length===0){if(extraAds.length>0){var fallbackAd=extraAds[Math.floor(Math.random()*extraAds.length)];setAd(fallbackAdElement.parentElement,'<div id="extrabox"><a id="extralink" href="'+fallbackAd.targetUrl+'"><img src="{{site.img}}'+fallbackAd.imgName+'.'+(fallbackAdElement.parentElement.id||'topa')+'.png" alt="'+fallbackAd.altText+'" title="'+fallbackAd.titleText+'" /></a></div>','Campaign'+fallbackAd.name);}else{gaEvent('Ads','display','NoCampaign');}}else{gaEvent('Ads','display','AdSense'+(donateTextOnFirst?'Footer':'Header'));}}
function validateForm(){var form=document.getElementById('DownloadForm');form.arch.each('checked',function(el){arch=el.value;});if(!archs.has(arch)||packages[arch]===undefined){return 'arch';}storage.setItem('arch',arch);form.api.each('checked',function(el){api=el.value;});if(!apis.has(api)||packages[arch].apis[api]===undefined){return 'api';}storage.setItem('api',api);form.variant.each('checked',function(el){variant=el.value;});if(!variants.has(variant)||packages[arch].apis[api][variant]===undefined){return 'variant';}storage.setItem('variant',variant);return 'ok';}
function updateButtons(){var v=validateForm();var ch=window.componentHandler;ch.upgradeDom();var info=document.getElementById('github-latest');if(v==='arch'){info.innerHTML='<div id="github-progressbar" class="mdl-progress mdl-js-progress mdl-progress__indeterminate progress-demo"></div><span class="mdl-typography--caption-color-contrast">querying GitHub API...</span>';}else if(v==='api'){info.innerHTML='<span class="mdl-typography--subhead-color-contrast">Select an Android version</span>';}else if(v==='variant'){info.innerHTML='<span class="mdl-typography--subhead-color-contrast">Select a variant</span>';}else{info.innerHTML='<span class="mdl-typography--headline">'+packages[arch].day+' '+packages[arch].month+' '+packages[arch].year+'</span><br><span class="mdl-typography--subhead">Size: '+packages[arch].apis[api][variant].size;}ch.upgradeDom();var hasApi=function(a){return v!=='arch'&&packages[arch].apis.hasOwnProperty(a);};for(var iApi=0;iApi<apis.length;iApi++){setBoxEnable(apis[iApi],hasApi(apis[iApi]));}setBoxCheck(api,hasApi(api));var hasVariant=function(a){return v!=='arch'&&v!=='api'&&packages[arch].apis[api].hasOwnProperty(a);};for(var iVariant=0;iVariant<variants.length;iVariant++){setBoxEnable(variants[iVariant],hasVariant(variants[iVariant]));}setBoxCheck(variant,hasVariant(variant));setButtonEnable('bdownload',v==='ok');setButtonEnable('bversion',v==='ok');setButtonEnable('bmd5',v==='ok');setButtonEnable('breport',v==='ok'||v==='variant');setButtonEnable('bolder',v==='ok'||v==='variant'||v==='api');}
function queryRelease(){document.getElementById('DownloadForm').arch.each('checked',function(el){arch=el.value;});storage.setItem('arch',arch);delete packages[arch];updateButtons();var httpRequest=new XMLHttpRequest();httpRequest.onreadystatechange=function(){if(httpRequest.readyState===XMLHttpRequest.DONE&&httpRequest.status===200){var data=JSON.parse(httpRequest.responseText);var releaseName=data.name.split(' ');packages[releaseName.shift()]={'apis':{},'dateTag':data.tag_name,'year':releaseName.pop(),'month':releaseName.pop(),'day':releaseName.pop()};for(var i=0;i<data.assets.length;i++){var asset=data.assets[i];if(asset.name.substr(asset.name.length-4,4)!=='.zip'){continue;}var assetName=asset.name.split('-');if(packages[assetName[1]].apis[assetName[2]]===undefined){packages[assetName[1]].apis[assetName[2]]={};}packages[assetName[1]].apis[assetName[2]][assetName[3]]={'size':Math.round(asset.size/1024/1024*100)/100+' MiB'};}updateButtons();if(autoDownload){downloadSubmit();autoDownload=false;}}};httpRequest.open('GET','https://api.github.com/repos/opengapps/'+arch+'/releases/latest?per_page=100');try{httpRequest.send();}catch(e){}}
function materialTabsNav(){"use strict";this.element_=document.querySelector(".mdl-layout"),this.element_&&(this.tabLinks=this.element_.querySelectorAll(".mdl-layout__tab"),this.activeLink=null,this.activePage=null,this.init())}materialTabsNav.prototype.linksMap_={},materialTabsNav.prototype.CssClasses_={ACTIVE:"is-active"},
materialTabsNav.prototype.init=function(){"use strict";for(var t=0;t<this.tabLinks.length;t++)this.tabLinks[t].addEventListener("click",this.clickHandler(this.tabLinks[t])),this.linksMap_["#"+this.tabLinks[t].href.split("#")[1]]=this.tabLinks[t];if(this.displaySectionForFragment(window.location.hash.split("/")[0]),"onhashchange" in window){var s=this;window.onhashchange=function(){s.displaySectionForFragment(window.location.hash.split("/")[0])}}},
materialTabsNav.prototype.displaySectionForFragment=function(t){"use strict";t&&this.linksMap_[t]&&this.linksMap_[t].click?this.linksMap_[t].click():t&&""!==t&&"#"!==t||this.displayIndexPage()},
materialTabsNav.prototype.displayIndexPage=function(){"use strict";this.activeLink&&this.activeLink.classList.remove(this.CssClasses_.ACTIVE),this.activeLink=null,this.activePage&&this.activePage.classList.remove(this.CssClasses_.ACTIVE),this.activePage=this.element_.querySelector("#downloadsection"),this.activePage.classList.add(this.CssClasses_.ACTIVE)},
materialTabsNav.prototype.clickHandler=function(t){"use strict";return function(s){s.preventDefault();var i=this.findPage(t);this.activePage&&this.activePage.classList.remove(this.CssClasses_.ACTIVE),this.activeLink&&this.activeLink.classList.remove(this.CssClasses_.ACTIVE),this.activePage=i,this.activeLink=t,t.classList.add(this.CssClasses_.ACTIVE),i.classList.add(this.CssClasses_.ACTIVE);var e=window.location.hash.split("/")[0],n=t.href.split("#")[1];return e!=="#"+n&&(history.pushState(null,"{{site.title}}",t),document.getElementById("content").scrollTop = 0,ga&&ga("send","pageview",location.pathname+n)),!0}.bind(this)},
materialTabsNav.prototype.findPage=function(t){"use strict";var s=t.href.split("#")[1];return this.element_.querySelector("#"+s)},window.addEventListener("load",function(){"use strict";window.componentHandler.upgradeDom();new materialTabsNav});
document.addEventListener('DOMContentLoaded',function(){window.componentHandler.upgradeDom();try{(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client: "ca-pub-9489060368971640",enable_page_level_ads:true})}catch(e){};for(var iAd=0;iAd<document.getElementsByClassName('adsbygoogle').length;iAd++){try{(window.adsbygoogle||[]).push({});}catch(e){validateAds();break;}}queryRelease();showSnackbar();document.addEventListener('click',function(e){var target=e.target||e.srcElement;var href=target.href;if(target.tagName.toLowerCase()==='a'&&href.toLowerCase().substr(0,4)==='http'){if(target.getAttribute('href')==='#'){e.preventDefault();}else if(target.target==='_blank'||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||e.button===1){gaEventOutbound(target.href);}else{e.preventDefault();redirectToUrl(target.href);}}});document.getElementById('bdownload').addEventListener('click',downloadSubmit);document.getElementById('bversion').addEventListener('click',versionSubmit);document.getElementById('bmd5').addEventListener('click',md5Submit);document.getElementById('breport').addEventListener('click',reportSubmit);document.getElementById('bolder').addEventListener('click',olderSubmit);var inputs=document.getElementsByTagName('input');for(var iInput=0;iInput<inputs.length;iInput++){var input=inputs[iInput];switch(input.name){case 'arch':input.addEventListener('change',queryRelease);break;case 'api':case 'variant':input.addEventListener('change',updateButtons);break;}}if(isApp){var links=document.getElementsByTagName('a');for(var iLink=0;iLink<links.length;iLink++){var link=links[iLink];if(document.querySelectorAll('[data-mdl-for="'+link.id+'"]').length===0&&link.href!='{{site.url}}/'){link.target='_blank';}else if(link.href=='{{site.url}}/'){link.href='{{site.url}}/?app=true';}}var forms=document.getElementsByTagName('form');for(var iForm=0;iForm<forms.length;iForm++){if(forms[iForm].id!=='DownloadForm'){forms[iForm].target='_blank';}}}});
window.onload=function(){setTimeout(validateAds,2000);};
var snowStorm=function(a,b){function y(a,b){return isNaN(b)&&(b=0),Math.random()*a+b}function z(a){return 1===parseInt(y(2),10)?a*-1:a}function A(){a.setTimeout(function(){c.start(!0)},20),c.events.remove(e?b:a,"mousemove",A)}function B(){c.excludeMobile&&g||A(),c.events.remove(a,"load",B)}this.autoStart=!0,this.excludeMobile=!0,this.flakesMax=128,this.flakesMaxActive=64,this.animationInterval=33,this.useGPU=!0,this.className=null,this.excludeMobile=!0,this.flakeBottom=null,this.followMouse=!0,this.snowColor="#fff",this.snowCharacter="&bull;",this.snowStick=!0,this.targetElement=null,this.useMeltEffect=!0,this.useTwinkleEffect=!1,this.usePositionFixed=!1,this.usePixelPosition=!1,this.freezeOnBlur=!0,this.flakeLeftOffset=0,this.flakeRightOffset=0,this.flakeWidth=8,this.flakeHeight=8,this.vMaxX=5,this.vMaxY=4,this.zIndex=1e3;var d,c=this,e=navigator.userAgent.match(/msie/i),f=navigator.userAgent.match(/msie 6/i),g=navigator.userAgent.match(/mobile|opera m(ob|in)/i),h=e&&"BackCompat"===b.compatMode,i=h||f,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=1,r=2,s=6,t=!1,u=!1,v=function(){try{b.createElement("div").style.opacity="0.5"}catch(a){return!1}return!0}(),w=!1,x=b.createDocumentFragment();return d=function(){function e(b){a.setTimeout(b,1e3/(c.animationInterval||20))}function h(a){var b=g.style[a];return void 0!==b?a:null}var d,f=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||e;d=f?function(){return f.apply(a,arguments)}:null;var g;g=b.createElement("div");var i={transform:{ie:h("-ms-transform"),moz:h("MozTransform"),opera:h("OTransform"),webkit:h("webkitTransform"),w3:h("transform"),prop:null},getAnimationFrame:d};return i.transform.prop=i.transform.w3||i.transform.moz||i.transform.webkit||i.transform.ie||i.transform.opera,g=null,i}(),this.timer=null,this.flakes=[],this.disabled=!1,this.active=!1,this.meltFrameCount=20,this.meltFrames=[],this.setXY=function(a,b,d){return!!a&&void(c.usePixelPosition||u?(a.style.left=b-c.flakeWidth+"px",a.style.top=d-c.flakeHeight+"px"):i?(a.style.right=100-b/j*100+"%",a.style.top=Math.min(d,n-c.flakeHeight)+"px"):c.flakeBottom?(a.style.right=100-b/j*100+"%",a.style.top=Math.min(d,n-c.flakeHeight)+"px"):(a.style.right=100-b/j*100+"%",a.style.bottom=100-d/l*100+"%"))},this.events=function(){function e(a){var d=c.call(a),e=d.length;return b?(d[1]="on"+d[1],e>3&&d.pop()):3===e&&d.push(!1),d}function f(a,c){var e=a.shift(),f=[d[c]];b?e[f](a[0],a[1]):e[f].apply(e,a)}function g(){f(e(arguments),"add")}function h(){f(e(arguments),"remove")}var b=!a.addEventListener&&a.attachEvent,c=Array.prototype.slice,d={add:b?"attachEvent":"addEventListener",remove:b?"detachEvent":"removeEventListener"};return{add:g,remove:h}}(),this.randomizeWind=function(){var a;if(o=z(y(c.vMaxX,.2)),p=y(c.vMaxY,.2),this.flakes)for(a=0;a<this.flakes.length;a++)this.flakes[a].active&&this.flakes[a].setVelocities()},this.scrollHandler=function(){var d;if(m=c.flakeBottom?0:parseInt(a.scrollY||b.documentElement.scrollTop||(i?b.body.scrollTop:0),10),isNaN(m)&&(m=0),!t&&!c.flakeBottom&&c.flakes)for(d=0;d<c.flakes.length;d++)0===c.flakes[d].active&&c.flakes[d].stick()},this.resizeHandler=function(){a.innerWidth||a.innerHeight?(j=a.innerWidth-16-c.flakeRightOffset,l=c.flakeBottom||a.innerHeight):(j=(b.documentElement.clientWidth||b.body.clientWidth||b.body.scrollWidth)-(e?0:8)-c.flakeRightOffset,l=c.flakeBottom||b.documentElement.clientHeight||b.body.clientHeight||b.body.scrollHeight),n=b.body.offsetHeight,k=parseInt(j/2,10)},this.resizeHandlerAlt=function(){j=c.targetElement.offsetWidth-c.flakeRightOffset,l=c.flakeBottom||c.targetElement.offsetHeight,k=parseInt(j/2,10),n=b.body.offsetHeight},this.freeze=function(){return!c.disabled&&(c.disabled=1,void(c.timer=null))},this.resume=function(){return!!c.disabled&&(c.disabled=0,void c.timerInit())},this.toggleSnow=function(){c.flakes.length?(c.active=!c.active,c.active?(c.show(),c.resume()):(c.stop(),c.freeze())):c.start()},this.stop=function(){var d;for(this.freeze(),d=0;d<this.flakes.length;d++)this.flakes[d].o.style.display="none";c.events.remove(a,"scroll",c.scrollHandler),c.events.remove(a,"resize",c.resizeHandler),c.freezeOnBlur&&(e?(c.events.remove(b,"focusout",c.freeze),c.events.remove(b,"focusin",c.resume)):(c.events.remove(a,"blur",c.freeze),c.events.remove(a,"focus",c.resume)))},this.show=function(){var a;for(a=0;a<this.flakes.length;a++)this.flakes[a].o.style.display="block"},this.SnowFlake=function(a,e,f){var g=this;this.type=a,this.x=e||parseInt(y(j-20),10),this.y=isNaN(f)?-y(l)-12:f,this.vX=null,this.vY=null,this.vAmpTypes=[1,1.2,1.4,1.6,1.8],this.vAmp=this.vAmpTypes[this.type]||1,this.melting=!1,this.meltFrameCount=c.meltFrameCount,this.meltFrames=c.meltFrames,this.meltFrame=0,this.twinkleFrame=0,this.active=1,this.fontSize=10+this.type/5*10,this.o=b.createElement("div"),this.o.innerHTML=c.snowCharacter,c.className&&this.o.setAttribute("class",c.className),this.o.style.color=c.snowColor,this.o.style.position=t?"fixed":"absolute",c.useGPU&&d.transform.prop&&(this.o.style[d.transform.prop]="translate3d(0px, 0px, 0px)"),this.o.style.width=c.flakeWidth+"px",this.o.style.height=c.flakeHeight+"px",this.o.style.fontFamily="arial,verdana",this.o.style.cursor="default",this.o.style.overflow="hidden",this.o.style.fontWeight="normal",this.o.style.zIndex=c.zIndex,x.appendChild(this.o),this.refresh=function(){return!isNaN(g.x)&&!isNaN(g.y)&&void c.setXY(g.o,g.x,g.y)},this.stick=function(){i||c.targetElement!==b.documentElement&&c.targetElement!==b.body?g.o.style.top=l+m-c.flakeHeight+"px":c.flakeBottom?g.o.style.top=c.flakeBottom+"px":(g.o.style.display="none",g.o.style.bottom="0%",g.o.style.position="fixed",g.o.style.display="block")},this.vCheck=function(){g.vX>=0&&g.vX<.2?g.vX=.2:g.vX<0&&g.vX>-.2&&(g.vX=-.2),g.vY>=0&&g.vY<.2&&(g.vY=.2)},this.move=function(){var b,a=g.vX*q;g.x+=a,g.y+=g.vY*g.vAmp,g.x>=j||j-g.x<c.flakeWidth?g.x=0:a<0&&g.x-c.flakeLeftOffset<-c.flakeWidth&&(g.x=j-c.flakeWidth-1),g.refresh(),b=l+m-g.y+c.flakeHeight,b<c.flakeHeight?(g.active=0,c.snowStick?g.stick():g.recycle()):(c.useMeltEffect&&g.active&&g.type<3&&!g.melting&&Math.random()>.998&&(g.melting=!0,g.melt()),c.useTwinkleEffect&&(g.twinkleFrame<0?Math.random()>.97&&(g.twinkleFrame=parseInt(8*Math.random(),10)):(g.twinkleFrame--,v?g.o.style.opacity=g.twinkleFrame&&g.twinkleFrame%2===0?0:1:g.o.style.visibility=g.twinkleFrame&&g.twinkleFrame%2===0?"hidden":"visible")))},this.animate=function(){g.move()},this.setVelocities=function(){g.vX=o+y(.12*c.vMaxX,.1),g.vY=p+y(.12*c.vMaxY,.1)},this.setOpacity=function(a,b){return!!v&&void(a.style.opacity=b)},this.melt=function(){c.useMeltEffect&&g.melting&&g.meltFrame<g.meltFrameCount?(g.setOpacity(g.o,g.meltFrames[g.meltFrame]),g.o.style.fontSize=g.fontSize-g.fontSize*(g.meltFrame/g.meltFrameCount)+"px",g.o.style.lineHeight=c.flakeHeight+2+.75*c.flakeHeight*(g.meltFrame/g.meltFrameCount)+"px",g.meltFrame++):g.recycle()},this.recycle=function(){g.o.style.display="none",g.o.style.position=t?"fixed":"absolute",g.o.style.bottom="auto",g.setVelocities(),g.vCheck(),g.meltFrame=0,g.melting=!1,g.setOpacity(g.o,1),g.o.style.padding="0px",g.o.style.margin="0px",g.o.style.fontSize=g.fontSize+"px",g.o.style.lineHeight=c.flakeHeight+2+"px",g.o.style.textAlign="center",g.o.style.verticalAlign="baseline",g.x=parseInt(y(j-c.flakeWidth-20),10),g.y=parseInt(y(l)*-1,10)-c.flakeHeight,g.refresh(),g.o.style.display="block",g.active=1},this.recycle(),this.refresh()},this.snow=function(){var e,f,a=0,b=null;for(e=0,f=c.flakes.length;e<f;e++)1===c.flakes[e].active&&(c.flakes[e].move(),a++),c.flakes[e].melting&&c.flakes[e].melt();a<c.flakesMaxActive&&(b=c.flakes[parseInt(y(c.flakes.length),10)],0===b.active&&(b.melting=!0)),c.timer&&d.getAnimationFrame(c.snow)},this.mouseMove=function(a){if(!c.followMouse)return!0;var b=parseInt(a.clientX,10);b<k?q=-r+b/k*r:(b-=k,q=b/k*r)},this.createSnow=function(a,b){var d;for(d=0;d<a;d++)c.flakes[c.flakes.length]=new c.SnowFlake(parseInt(y(s),10)),(b||d>c.flakesMaxActive)&&(c.flakes[c.flakes.length-1].active=-1);c.targetElement.appendChild(x)},this.timerInit=function(){c.timer=!0,c.snow()},this.init=function(){var d;for(d=0;d<c.meltFrameCount;d++)c.meltFrames.push(1-d/c.meltFrameCount);c.randomizeWind(),c.createSnow(c.flakesMax),c.events.add(a,"resize",c.resizeHandler),c.events.add(a,"scroll",c.scrollHandler),c.freezeOnBlur&&(e?(c.events.add(b,"focusout",c.freeze),c.events.add(b,"focusin",c.resume)):(c.events.add(a,"blur",c.freeze),c.events.add(a,"focus",c.resume))),c.resizeHandler(),c.scrollHandler(),c.followMouse&&c.events.add(e?b:a,"mousemove",c.mouseMove),c.animationInterval=Math.max(20,c.animationInterval),c.timerInit()},this.start=function(d){if(w){if(d)return!0}else w=!0;if("string"==typeof c.targetElement){var e=c.targetElement;if(c.targetElement=b.getElementById(e),!c.targetElement)throw new Error('Snowstorm: Unable to get targetElement "'+e+'"')}if(c.targetElement||(c.targetElement=b.body||b.documentElement),c.targetElement!==b.documentElement&&c.targetElement!==b.body&&(c.resizeHandler=c.resizeHandlerAlt,c.usePixelPosition=!0),c.resizeHandler(),c.usePositionFixed=c.usePositionFixed&&!i&&!c.flakeBottom,a.getComputedStyle)try{u="relative"===a.getComputedStyle(c.targetElement,null).getPropertyValue("position")}catch(a){u=!1}t=c.usePositionFixed,j&&l&&!c.disabled&&(c.init(),c.active=!0)},c.autoStart&&c.events.add(a,"load",B,!1),this}(window,document);
